jQuery(function(b){var i=b("meta[name=csrf-token]").attr("content"),j=b("meta[name=csrf-param]").attr("content");b.fn.extend({triggerAndReturn:function(a,c){a=new jQuery.Event(a);this.trigger(a,c);return a.result!==false},callRemote:function(){var a=this,c=a.is("form")?a.serializeArray():[],e=a.attr("method")||a.attr("data-method")||"GET",f=a.attr("action")||a.attr("href");if(f!==undefined){a.triggerAndReturn("ajax:before")&&b.ajax({url:f,data:c,type:e.toUpperCase(),beforeSend:function(d){d.setRequestHeader("Accept",
"text/javascript");a.trigger("ajax:loading",d)},success:function(d,g,h){a.trigger("ajax:success",[d,g,h])},complete:function(d){a.trigger("ajax:complete",d)},error:function(d,g,h){a.trigger("ajax:failure",[d,g,h])}});a.trigger("ajax:after")}}});b("a[data-confirm],input[data-confirm]").live("click",function(){var a=b(this);if(a.triggerAndReturn("confirm"))if(!confirm(a.attr("data-confirm")))return false});b('form[data-remote="true"]').live("submit",function(a){b(this).callRemote();a.preventDefault()});
b('a[data-remote="true"],input[data-remote="true"]').live("click",function(a){b(this).callRemote();a.preventDefault()});b("a[data-method][data-remote!=true]").live("click",function(a){var c=b(this),e=c.attr("href");c=c.attr("data-method");e=b('<form method="post" action="'+e+'">');c=b('<input name="_method" value="'+c+'" type="hidden" />');var f=b('<input name="'+j+'" value="'+i+'" type="hidden" />');e.hide().append(c).append(f).appendTo("body");a.preventDefault();e.submit()});b('form[data-remote="true"]').live("ajax:before",
function(){b(this).children("input[data-disable-with]").each(function(){var a=b(this);a.data("enable_with",a.val()).attr("value",a.attr("data-disable-with")).attr("disabled","disabled")})});b('form[data-remote="true"]').live("ajax:after",function(){b(this).children("input[data-disable-with]").each(function(){var a=b(this);a.removeAttr("disabled").val(a.data("enable_with"))})})});